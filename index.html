<!doctype html>
<html lang="ja">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Jupyter Notebook → .py 変換（ブラウザでローカル処理）</title>
  <meta name="description" content="Jupyter .ipynb をブラウザ内だけで .py に変換します（nbconvertの簡易互換）。アップロード→変換→ダウンロード。サーバ送信なし。" />

  <!-- Google AdSense (Auto ads) -->
  <!-- 本番運用時は、https/独自ドメインで公開し、サイト審査を通したうえで使用してください。 -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-REPLACE_WITH_YOUR_PUBLISHER_ID" crossorigin="anonymous"></script>

  <link rel="stylesheet" href="styles.css" />
</head>

<body>
  <div class="container">
    <!-- ヘッダー -->
    <header>
      <div class="brand">
        <svg width="32" height="32" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"
          aria-hidden="true">
          <path d="M12 2l2.39 4.84 5.34.78-3.86 3.76.91 5.32L12 14.77 6.22 16.7l.91-5.32L3.27 7.62l5.34-.78L12 2z"
            fill="#60a5fa" />
        </svg>
        <div>
          <div style="font-size:20px; font-weight:800; letter-spacing:.2px;">
            Jupyter → .py 変換
          </div>
          <div class="meta">ブラウザ内で完結（サーバ送信なし）</div>
        </div>
      </div>
      <span class="badge">Free • Client‑side only</span>
    </header>

    <!-- メインコンテンツ -->
    <main class="grid">
      <!-- ファイルアップロード＆変換セクション -->
      <section class="panel">
        <h2 style="margin:0 0 8px 0;">1) .ipynb を選択 or ドロップ</h2>
        <div id="dropzone" class="dropzone" role="button" tabindex="0"
          aria-label="ファイルをドロップ、またはクリックして選択">
          <div>ここに <strong>.ipynb</strong> をドロップ</div>
          <div class="meta">またはクリックして選択</div>

          <!-- ファイル選択＆変換ボタン -->
          <div class="controls">
            <label class="btn">
              ファイルを選択
              <input id="fileInput" type="file" accept=".ipynb,application/json" hidden />
            </label>
            <button id="btnConvert" class="btn btn-primary" disabled>
              2) 変換してダウンロード
            </button>
          </div>

          <!-- 変換オプション -->
          <div class="controls" style="gap:16px;">
            <label>
              <input id="optMagics" type="checkbox" />
              マジック/!行をコメントアウト
            </label>
            <label>
              <input id="optHeader" type="checkbox" checked />
              ヘッダーコメントを付与
            </label>
            <label>
              <input id="optInTags" type="checkbox" checked />
              セル見出し <code># In[n]:</code> を挿入
            </label>
          </div>
        </div>
      </section>

      <!-- ファイル情報サイドバー -->
      <aside class="panel">
        <h3 style="margin-top:0;">ファイル情報</h3>
        <div id="fileMeta" class="list meta">
          <div class="kv">
            <strong>ファイル名</strong>
            <span id="metaName">—</span>
          </div>
          <div class="kv">
            <strong>サイズ</strong>
            <span id="metaSize">—</span>
          </div>
          <div class="kv">
            <strong>nbformat</strong>
            <span id="metaNbformat">—</span>
          </div>
          <div class="kv">
            <strong>セル総数</strong>
            <span id="metaCells">—</span>
          </div>
          <div class="kv">
            <strong>コードセル</strong>
            <span id="metaCodeCells">—</span>
          </div>
          <div class="kv">
            <strong>出力行数</strong>
            <span id="metaLines">—</span>
          </div>
        </div>
        <hr style="border-color:#1f2937;">
        <div id="status" class="status">準備中…</div>
      </aside>
    </main>

    <!-- フッター -->
    <footer>
      <p>
        このツールはブラウザ内で完結し、ファイルは外部へ送信されません。出力は <code>nbconvert --to script</code>
        の挙動を参考にした簡易実装で、完全一致を保証するものではありません（必要に応じてマジック等をコメント化できます）。
      </p>
    </footer>

    <!-- Google AdSense 広告ユニット（任意） -->
    <ins class="adsbygoogle" style="display:block;margin:24px 0" data-ad-client="ca-pub-XXXX" data-ad-slot="YYYY"
      data-ad-format="auto" data-full-width-responsive="true"></ins>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
  </div>

  <!-- アプリケーションスクリプト -->
  <script src="app.js"></script>
</body>

</html>
